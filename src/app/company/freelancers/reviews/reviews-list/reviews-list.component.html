<div *ngIf="reviews.length === 0" class="text-center text-muted py-5">
  Nenhuma avaliação disponível.
</div>

<div
  *ngFor="let review of reviews"
  class="review-card card shadow-sm border-0 mb-4"
>
  <div class="card-body">
    <!-- Topo: avatar + nome + badge -->
    <div class="d-flex justify-content-between align-items-start">
      <div class="d-flex align-items-center">
        <img
          [src]="getAvatar(review)"
          alt="avatar"
          class="review-avatar me-3"
        />
        <div>
          <h6 class="mb-0 fw-bold">{{ getName(review) }}</h6>
          <small class="text-muted">
            {{ type === "received" ? "Avaliou você" : "Você avaliou" }}
          </small>
        </div>
      </div>
      <span class="badge rounded-pill bg-light text-dark border">
        {{ getBadge(review) }}
      </span>
    </div>

    <!-- Estrelas + Data -->
    <div class="d-flex align-items-center mt-2 mb-3">
      <div class="text-warning me-2">
        <i
          *ngFor="let star of getStarArray(review.rating); let i = index"
          class="bi"
          [ngClass]="star ? 'bi-star-fill' : 'bi-star'"
        ></i>
      </div>
      <small class="text-muted">
        <i class="bi bi-calendar-event me-1"></i>
        {{ formatDate(review.createdAt) }}
      </small>
    </div>

    <!-- Projeto -->
    <div class="p-3 bg-light rounded mb-3" *ngIf="review.proposalName">
      <p class="fw-semibold mb-1">Projeto: {{ getProjectName(review) }}</p>
      <small class="text-muted">{{ getProjectValue(review) }}</small>
    </div>

    <!-- Comentário -->
    <p class="mb-0 text-muted">{{ review.reviewText }}</p>
  </div>
</div>
